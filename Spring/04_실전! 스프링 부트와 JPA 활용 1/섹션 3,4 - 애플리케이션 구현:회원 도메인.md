# 섹션 3, 애플리케이션 구현 준비



## 애플리케이션 구현 준비



도메인 설계는 데이터 관점의 설계였음

- 회원 기능
  - 회운 등록
  - 회원 조회
- 상품 기능
  - 상품 등록
  - 상품 수정
  - 상품 조회
- 주문 기능
  - 주문 등록
  - 주문 내역 조회
  - 주문 취소

예제 단순화

- 로그인 X
- 파리미터 검증, 예외 처리 단순화
- 상품은 도서관만 사용
- 카테고리는 사용 X
- 배송 정본느 사용 X



## 애플리케이션 아키텍처

계층형 구조

- Contoller, Service, Repository
  - DOMAIN 참조
- reposository : JPA직접 사용

모든걸 다 service를 타서 repo의 접근을 하는 것은 꼭 좋은 것만은 아님



패키지 구조

- jpabook.jpashop
  - domain
  - exception
  - repository
  - serivce
  - web



**개발 순서 : 서비스, 리포지토리 계층 개발, TC 사용 검증, 마지막에 웹 계층 적용**



# 섹션 4. 회원 도메인 개발



## 회원 리포지토리 개발

뚝딱

## 회원 서비스 개발

기본적으로 서비스, repository를 활용해 DB에 직접 접근

@Transactional (Spring) 필요

읽기 -> (readOnly = true) 넣어야 해, 그래야 JPA 내 최적화 함



스프링은 생성자 주입이 트렌드(그래야 바꿀 수 있음)

내부 필드를 final로 설정해야 컴파일 시점에서 필요한게 뭔지 알 수 있다

더 나아가서 lombok에 @RequiredArgsConstructor를 사용하면, final이 붙은 필드만 주입하도록 만들 수 있따.

## 회원 기능 테스트

- 회원 가입 성공
- 회원 가입 할 떄 같은 이름이 있으면 예외 발생



h2 - cheatsheat - inMemory url 넣으면, 메모리에 !!!

테스트에서, 스프링 부트에서 DB 설정파일 안 만들면 자체적으로 메모리에 DB를 만들어 테스트 돌려줌 ㄷㄷ

