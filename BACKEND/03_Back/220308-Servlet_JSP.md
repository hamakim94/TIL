# 22/03/08

## 웹과 웹 프로그래밍

- URL  : 웹 상의 자원을 참조하기 위한 웹 주소
- 웹 페이지 : 웹 브라우저를 통해서 보여지는 화면
- 웹 서버 - 클라이언트 요청에 맞는 응답(웹 페이지)를 제공
- 웹 어플리케이션 (Web Application) - 웹 서버를 기반으로 실행되는 응용 소프트웨어
- 웹 어플리케이션 서버 - 요청이 오면 알맞은 프로그램을 실행하여 응답 만들고 제공하는 서버 => 만들거

---

## 웹 구조

유저 - 클라이언트 - 요청/응답 ( - 웹 서버 - 어플리케이션 서버) - DB

+ 클라이언트와 서버와의 규격 : HTTP
+ 톰켓 : WAS

---

## Servlet

- **자바를 사용하여 웹페이지를 동적으로 생성하는 서버측 프로그램 / 그 사양**
- 웹 서버의 성능을 향상하기 위해 사용되는 자바 클래스의 일종
- 웹 기반 으용 프로그램을 구축하기 위한 구성 요소 기반의 플랫폼 독립적 방법을 제공
- 대화형 웹 응용 프로그램을 구축하는데 널리 사용
- JSP와 비슷하지만, JSP가 HTML문서 안에 자바 코드를 포함
- **서블릿은 자바 코드 안에 HTML 포함**

---

context root : 그냥 읽는거, 하나하나 다 설정하면 전부 읽기때문에, 일단 그대로 둔다

Content directory : 해당 디렉토리 안에 있는 내용 읽을 수있음

---

Java Resources

- web 어플리케이션에 필요한 .java 있는것들

Webcontent

- WEB-INF -> web.xml(3.0 이하 버전에서 쓰는거, 설정 파일) => annotation으로 그 이상에 기능에선 안 체크해도 ok

---

기존 구현돼있는거로 쓸거야(GenericServlet)

- 추상 클래스 구현해야 쓸 수 있어



### 서블릿 생명주기

서블릿 인스턴스는 서블릿이 포함된 웹컨테이너에 의해 제어

인스턴스 X - 다음 작엄

1. 서블릿 클래스 로드
2. 서블릿 클래스 인스턴스 생성
3. 서블릿 인스턴스 초기화
4. 웹 컨ㄴ테이너에 의한 서비스 메서드 호출..

---

### Servlet API

- 서블릿 interface는 모든 서블릿이 구현해야 하는 모든 메서드를 정의
- 기본적으로 HTTP관련하니, HttpServlet을 상속사여 작성한다



new - servlet

URL mapping : 요청시 이거 보여줄게

---

기본 실행 시.

http://localhost:8080/HelloServlet/HelloServlet 

- Http : 약속
- local~/HelloServlet(컨텍스트 루트)
- /HelloServlet

| GET : 조회                                                   | POST : 글쓰기, 글수정, 글 삭제                               |
| ------------------------------------------------------------ | ------------------------------------------------------------ |
| 지정된 리소스에서 데이터를 요청하는데 사용(주소에 데이터 실어!) | 리소스를 생성/업데이트하기 위해 서버에 데이터를 보내는데 사용 |
| query string(name/value 쌍)이 URL에 포함되어 전송됨. POST와 비교하여 보안이 취약함 | HTTP header의 body파라미터를 포함하여 전송, 데이터 길이에 대한 제한이 없다. 매개변수가 브라우저나 웹 서버에 저장되지 않음 |
| URL이 길이 제한이 있으므로, 전송가능한 데이터의 길이가 제한적(URL maximum characters : 2048, 2KB), ASCII문자만 가능하다 | 제한 없음, 바이너리 데이터도 허용                            |
| get요청보내기 - 1.주소 2. 링크(atag)  3.폼(get)              | post요청보내기 - 폼(post) : 내용                             |

### URL 구성요소

- 프로토콜 : 웹 브라우저가 서버와 통신하기 위한 규약
- 서버 : 웹 페이지를 요청할 서버의 주소, 실제 IP주소나 도메인 입력 가능
- 경로 : 서버 내의 상세 경로
- 쿼리 스트링 : 추가로 서버로 데이터를 전송하기 위해서 사용한다. ?마크를 적어 시작을 표시한다. parameter_name = value 형태로 작성하며 파라미터가 여러개일 경우 '&'로 구분하여 작성

---

### Front - Controller 패턴

- get, post인 지 엄청 헷갈리는데,
- process라는 메서드를 실행시켜서, 그 안에서 동작을 하게끔 만들 수 있다

---

## JSP ( Java Server Page)

- Servlet 표준을 기반으로 작성된 웹 어플리케이션 개발 언어
- 요청을 처리하고 응답을 구성하는 방법을 작성. 정적 요소(HTML. XML 등) 와 동적 요소(JSP 객체)를 모두 포함하는 텍스트 기반 문서인 JSP를 개발하기 위한 언어
- 서버측 객체에 접근하기 위한 표현 언어

---

### 구성 요소

- 지시자
  - JSP 페이지 설정 정보를 지정하기 위해서 사용
- 스크립트 요소 : 스크립트릿, 표현식, 선언부
  - JSP에서 문서의 내용을 동적으로 생성하기 위해
- JSP 기본객체
  - 요청 및 응답 관련 정보를 얻거나, 응답 결과를 만들기 위해서 사용
- 표현 언어
  - JSP를 좀 더 간결
- Action Tag와 JSTL
  - 자주 사용하는 기능을 모아 미리 정의해여 태그 형태로 작성한다.

---

### 지시자

- 웹 컨테이너(톰켓)이 JSP 번역, 실행하는 방법을 서술
- page, include ///
- page 지시자 -> import 정도만~ ( 그런게 있군)



- include 지시자
  - JSP내 다른 JSP 페이지를 포함하기 위해서 사용
  - header,footer를 별도로 작성하여 페이지 내에 삽입해 반복되는 코드 줄임

---

### 스크립트 요소

- JSP페이지내에서 프로그래밍에서 로직을 수행하는데 사용
- 선언부
  - 멤버변수 선언이나 메서드를 선언한

#### 스크립트릿

- 스크립팅 언어로 작성된 코드 조각을 포함하는데 사용 : <% 자바 %>

#### 표현식

- 문자열로 변환된 값을 출력결과에 포함시킬 떄 

#### 주석

- <%-- 주석 --%>



---

### JSP기본객체

- request : javax.servlet.http.HttpServletRequest : 요청 정보를 저장하는객체

- response : 응답 정보를 저장하는 객체
- session : HTTP 세션 정보를 저장하는 객체
- application : 웹 어플리케이션 context정보를 저장하는 객체

---

### JSP기본영역

Page(pageContext) < Request(request) < session(session) < application(application)

- 페이지 : 하나의 페이지 정보를 담고 있는 영역, 페이지 바뀌면 새로운 객체 생성
- request : 하나의 요청을 처리할 떄 사용되는 영역, 응답이 완료되면 사라진다
- 하나의 웹 브라우저와 관련된 영역, 로그인 정보 등을 저장한다
- 웹 어플리케이션 영역, 어플리케이션이 시작되면 종료될 때 까지 유지 된다

---

### JSP 기본 객체 영역 (Scope) 메서드

- setAttribute(string name, object value) : key:value형태로 각 여역에 데이터를 저장, name이 value를 얻어 도기 위한 key가 된다

- getAttributes(String name) : object  현재 객체에서 인자 받은 이름으로 설정된 값 반환

- revmoveAttribute(String name) : void : 현재에서 인자로 받은 이름으로 설정된 값을 삭제

---

### 페이지 이동

요청을 받아서 화면을 변경하는 방법은 두 가지

1. **포워드**

- 요청이 들어오면 요청을 받은 JSP 또는 Servlet이 직접 응답을 작성하지 않고, 요청을 서버내부에서 전달해 해당 요청을 처리함
  - 응 들어왔어. 그대로 떠서 서버로!(기존 req, resp 유지)
- 포워드 방식
  - RequestDispatcher dispatcher = request.getRequestDispatcher("이동할 페이지")
  - dispatcher.foward(request, response)
- request, response 객체가 전달돼  객체가 사라지지 않음, 브라우저에는 최초 요청한 주소가 표시된다.



2. **리다이렉트**

- 요청이 들어오면 내부 로직 실행 후, 브라우저의 URL을 변경, 새로운 요청 생성 -> 페이지를 이동
  - 응 들어왔어. 내가 처리할게, 기존 req, resp폐기 => 새로운 통로를 만들어 서버랑 연결
- respond.sendRedirect("location");

브라우저가 새로운 요청을 만들어 내기 때문에 최초 요청 주소와 다른 요청주소가 화면에 보여진다.

---

### 폼 사용법

- form (method : 방법, action : 갈 주소)
  - <fieldset>
    - legend
    - input(type : 개발자전용, 보통 hidden, name : main에서 받을 이름, value : 내가 하고싶은 동작)
    - <label : 제목>
    - <input : type 정해주고, id(label 제목 일치), name도 id와 같이

