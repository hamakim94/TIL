# 프로세스 - 교착상태 개념, 조건



## 상호 배제(MuteX : Mutual eXclusion)

### 임계 구역

다수의 프로세스가 서로 공유하는 자원의 영역
자원을 공유하는 프로세스는 동시 사용이 불가능(배타적)하며 독점도 불가능
그래서 임계 구역을 사용하기로 했음



### 상호 배제

하나의 프로세스만 임계구역에 접근할 수 있도록 다른 프로세스의 접근을 차단하는 것
4가지 요구 조건 필요

1. 단일 프로세스만 임계구역에 존재
2. 임계구역 진입이 무한정 연기되지 않음
3. 임계구역 내 프로세스가 다른 프로세스의 진입 차단 가능
4. 프로세스 속도나 개수에 영향을 받지 않음

### 상호 배제 알고리즘

잠금 : 다른 프로세스 접근 X

인터럽트 봉쇄 : 임계구역 사용 중 인터럽트 발생을 막아 새로운 프로세스 접근 차단

엄격한 교대 : 다수의 프로세스가 하나의 임계구역을 교대로 접근

Busy Wait(바쁜 대기 현상) : 현재 사용중인 프로세스의 실행시간이 길다면 다른 프로세스는 임계구역을 사용하기 위해 계속해서 대기

**세마포어(Semaphore)** 
임계구역을 지키기 위한 기존 상호배제 알고리즘이 바쁜 대기 현상을 야기하는 것을 방지하기 위해 개발된 알고리즘
바쁜 대기 현상을 방지하고자 재우고(Sleep, Wait, P연산) 깨워주는(Wakeup, Signal, V연산) 방식을 사용
공유 자원을 나타내는 변수를 새마포어 변수라고 함



## 교착 상태(Deadlock)

### 정의

다수의 프로세스가 같은 자원의 할당을 요구하며 무한정 기다리고 있는 상태

### 언제 발생?

1. 상호 배제(Mutual Exclusion) : 한 리소스는 한 번에 한 프로세스만이 이용 가능
2. 점유와 대기(Hold and Wait) : 프로세스가 하나 이상의 리소스를 점유하고 있으면서 다른 프로세스가 가지고있는 리소스를 기다리는 상태
3. 비선점(No Preemption) : 프로세스가 리소스를 자발적으로 반환할 때까지 기다리는 상태
4. 환형 대기(Circular Wait) : 각 프로세스가 순차적으로 다음 프로세스가 요구하는 자원을 가진 상태



### 예방 방법들

각 조건(1~4)이 안 되는 조건을 찾자

**회피**
안정적 상태를 유지할 수 있는 프로세스의 요청만 받기
대표 : 은행원 알고리즘

**발견**
공유 자원과 프로세스의 관계를 인접 행렬료 표현해 컴퓨터의 중단 원인을 파악

**회복**
교착 상태가 발생한 프로세스 중 중단할 프로세스 정하기(희생양)

