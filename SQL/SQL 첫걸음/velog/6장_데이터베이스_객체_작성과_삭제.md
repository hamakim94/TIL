## 25강_데이터베이스 객체

### 1. 데이터베이스 객체

정의 : 테이블이나 뷰, 인덱스 등 데이터베이스 내에 정의하는 **모든 것**

실체를 가지는 어떤 것



#### cf) 객체 이름 규칙

- 기존 이름, 예약어와 중복 X
- 숫자로 시작 X
- 언더스코어(_) 외 기호 사용 X
- 한글 -> 더블쿼트("")(MySQL - 백쿼트(''))로 둘러쌈
- 시스템이 허영한 길이 초과 X
  - **의미 없는 이름을 붙이지 않도록**



### 2. 스키마

DB객체는 스키마라는 그릇에 담김

객체 이름이 같아도 다른 스키마면  OK

DB객체는 스키마객체라고도 불린다

- 데이터베이스에서 테이블 작성해 구축 -> '스키마 설계'

#### cf) 네임스페이스 

- 이름이 중복되지 않도록 기능하는 그릇
- 스키마, 테이블 모두 네임스페이스!



## 26강_테이블의 작성,삭제,변경 - DDL

``` sql
-- SYNTAX
CREATE TABLE 테이블명(열 정의 1, 열 정의 2, ...)
DROP TABLE 테이블명
ALTER TABLE 테이블명 하부명령
```

### 1. 테이블 작성

DDL -> 모두 같은 문법 사용 ( CREATE TABLE, CREATE VIEW 등)

``` sql
열명 자료형 [DEFAULT 기본값] [NULL | NOT NULL]
```

### 

### 2. 테이블 삭제

**DROP TABLE 테이블명으로 삭제 가능, 그렇지만 주의하자!**

테이블 정의를 그대로 둔 채 데이터만 삭제 -> DELETE 명령어

DELETE는 복잡, 테이블 내 데이트 전부 **빠르게**  삭제 -> **TRUNCATE TABLE 테이블명**



### 3. 테이블 변경

``` mysql
-- SYNTAX
ALTER TABLE 테이블명 변경명령
```

ALTER의 크게 두 가지 기능

- 열 추가, 삭제, 변경
- 제약 추가, 삭제



#### 열 추가 : ADD 하부명령

``` sql
ALTER TABE 테이블명 ADD 열 정의
-- ALTER TABLE sample ADD newcol INTEGER
```

cf) NOT NULL 제약이 걸린 열을 추가 -> 기본값을 지정해야..!



#### **열 속성 변겅** : MODIFY 하부명령

``` sql
-- SYNTAX
ALTER TABLE 테이블명 MODIFY 열 정의
-- ALTER TABLE sample MODIFY newcol VARCHAR(20);
```

- 열 속성 바뀌면 테이블에 들어간 데이터의 자료형 역시 바뀌고
- 하나라도 안 되면 ALTER 명령이 먹히질 않음
  - ALTER -> 비교적 새로운 명령, 각 DB마다 다를수도

#### 열 이름 변경 : CHANGE 하부명령

``` sql
-- SYNTAX
ALTER TABLE 테이블명 CHANGE [기존 열 이름] [신규 열 정의]
```

cf) oracle -> RENAME TO 하부명령 한다

#### 열 삭제 : DROP 하부명령

``` sql
-- SYNTAX
ALTER TABLE 테이블명 DROP 열명
```



### 4. ALTER TABLE로 관리

실무에서 자주 사용할 2가지 경우

- 최대 길이 연장
- 열 추가



## 27강_제약

### 1. 테이블 작성시 제약 정의

``` sql
CREATE TABLE sample (
	a INTEGER NOT NULL,
	b INTEGER NOT NULL UNIQUE, -- 열 제약
	c VARCHAR(30),
  PRIMARY KEY (a, b) -- 테이블 제약
);
```

NOT NULL, UNIQUE -> **열 제약**

복수의 열에 제약 설명 -> **테이블 제약**



**제약에는 이름을 붙일 수 있다**

```sql
CREATE TABLE sample2(
	no INTEGER NOT NULL,
	sub_no INTEGER NOT NULL,
	name VARCHAR(30),
	CONSTRAINT pkey_sample PRIMARY KEY (no, sub_no)
);
```



### 2. 제약 추가

**\- 열 제약 추가**(ALTER- MODIFY)

```sql
ALTER TABLE sample MODIFY c VARCHAR 30 NOT NULL;
```

**\- 테이블 제약 추가**(ALTER - ADD)

``` sql
ALTER TABLE sample2 ADD CONSTRAINT pkey_exam PRIMARY KEY(a);
```



### 3. 제약 삭제

``` sql
-- 열 제약 삭제
ALTER TABLE sample MODIFY c VARCHAR(30) -- NOT NULL 삭제
-- 테이블 제약 삭제
ALTER TABLE sample2 DROP CONSTRAINT pkey_exam
ALTER TABLE sample2 DROP PRIMARY KEY -- 테이블당 하나만 설정할 수 있는 기본 키이기에 가능
```



### 4. 기본키 ***********************

``` sql
-- 테이블 예시
CREATE TABLE sample3(
	p INTEGER NOT NULL,
	a VARCHAR(30),
	CONSTRAINT pkey_sample3 PRIMARY KEY (p)
);
```

기본키?

- **테이블 당 한 개를 특정할 수 있는 검색키(중 복 X )**

**기본키 제약**

- 열을 기본키로 지정해 유일한 값을 가지도록 하는 구조
- Update 중복값, insert 중복값 하면 오류



#### cf) 복수의 열로 기본키 구성하기

여러 열을 기본키로 -> 해당 열들을 모두 사용해 중복을 비교

