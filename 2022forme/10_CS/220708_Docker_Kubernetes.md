# Docker & Kubernetes

## 0.Why?

### DevOps

데브옵스는 소프트웨어의 개발과 운영의 합성어

소프트웨어 개발자와 정보기술 전문가 간의 소통, 협업 및 통합을 강조하는 개발 환경이나 문화

SW개발조직과 운영조직간에 상호 의존적 대응

**조직이 소프트웨어 제품과 서비스를 빠른 시간에 개발 및 배포하는 것을 목적**으로 한다.

---

### 도커 / 쿠버네티스를 도입하면 더 빨라지나요?

사실 DevOps는 철학&방법론!

우리팀이 자연스럽게 신경쓰는 것!



=> 서비스의 빠른 개발 & 배포가 중요하고 여러가지 방법을 사용하여 개산하고 싶다는 생각!!

---

### 문화

좋은 도구를 잘 사용하여 자동화

- 부하가 생길 때 알아서 서버가 늘어난다면?
- 브랜치를 만들고 푸시할 때 자동으로 배포된다면?

좋은 도구를 잘 사용하여 측정

- 로그를 남기고 검색을 할 수 있다면?
- 특정 시점에 부하가 늘어난걸 확인할 수 있다면?
  - 측정 = 빠른 분석 = 효울 증가

좋은 도구를 잘 사용하여 공유

- 어렵게 해결한 내용을 글로 공유한다면?
- 더 효율적인 설정을 공유한다면??
  - 공유 = 팀원 지식 습득 = 효율 증가

좋은 도구를 잘 사용하여 축적

- 일부러 신경 쓰지 않아도 자연스럽다면?
- 고민하지 않고 사용할 수 있다면?
  - 축적 = 패시브 스킬 = 효율 증가



---

### GIT, Docker, Kubernetes

- 새로운 기술을 배우는 이유는 개발과 배포를 개선하기 위함
- 새로운 도구를 도입했는데 개발과 배포가 개선되지 않는다면 재검토
- 토입하는게 좋을지 안좋을지 알아보자

---

## 1. 서버를 관리한다는 것(도커등장)

자체 서버 운영 -> 설정 관리 도구 등장 -> 가상머신 등장 -> 클라우드 등장

-> PaaS 등장 -> 도커 등장 -> 쿠버네티스 등장 -> 서비스메시 등장

한 땀 한 땀

---

### DOCKER

- 가상 머신 실행을 빠르게 할 수 있어
- 잘 만들어두면 여기저기서 가지고 할 수 있어!
- 어떤 프로그램도 컨테이너로 만들 수 있음!
- 어디서든 돌아갑니다(어떤 클라우드에서도 사용 가능)

---

- 가상 머신처럼 독립적으로 실행되지만
- 가상머신보다 **빠르고**
- 가상머신보다 **쉽고**
- 가상머신보다 **효율**적임

---

자원 격리(고급 기능)

- 프로세스 > 가상으로 분리(침범 X)
- 파일 디렉토리 -> 가상으로 분리(다른건 바라보지 못해)
- CPU, MEMORY , 그룹별로 제한
- 리눅스의 초고급 기능!

---

어렵고 복잡한 기술(리눅스)을 사용하기 쉽게!

- 컨테이너 : 격리된 환경에서 작동하는 프로세스
- 리눅스 커널의 여러 기술 활용

---

### 도커의 변화

- 클라우드 이미지보다 관리하기 쉬움
- 다른 프로세스와 격리돼 가상머신처럼 사용하지만 성능저하 거의 없음
- 복잡한 기술 몰라도 사용
- 이미지 빌드 기록이 남음
- 코드와 설정으로 관리 > 수정 관리
- 오픈 소스

== > **모든 것을 컨테이너로**

---

코드 작성 -> Build -> Docker로 Ship-> Run!

근데 컨테이너가 겁나많아져.....

쿠버네틱스의 등장!!

---

### 도커 그 이후

- 배포는 어떻게?
  - docker stop app && docker run ..   
  - docker stop app && docker run ..
  - docker stop app && docker run .. =>  이런식으로 하나하나..?

- 버전업/다운(롤아웃/롤백) 하나하씩 해야해..?

- 서비스 검색?
  - 프록시 서버가 접근 => 웹 서버가 작성
  - 자동으로 안 될까?
- 서비스 이상 / 부하 모니터링 어떻게 할까?

---

### 컨테이너 오케스트레이션

- Container Orchestration

- 복잡한 컨테이너 환경을 효과적으로 관리하기 위한 도구

  - 중앙 제어(클러스팅)

  - 네트워킹

  - 노드 스케일(엄청 크면 자기들끼리 와라락)

  - 상태 관리

  - ~~~ dockerfile
    {
    	image : "app1"
    	replicas : 3
    }
    ~~~

  - 배포 관리(남는 자리를 알아서 넣어줌)

  - 버전 관리 {version : "v1"} => "v2" 로, RollBack "v1"

  - 서비스 등록 및 조회

  - 볼륨 스토리지(다른거 마운트!)

---

## 3.배포 프로세스 개선하기

- releasing the code multiple times a day
- 더 자주
- 더 빠르게
- 더 많이
- 더 자유롭게?

